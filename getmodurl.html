<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="getmodurl">
    <meta name="author" content="ThirteenAG">
    <link rel="icon" href="./img/favicon.png">

    <title>getmodurl</title>
  </head>

<body>
<div>Please wait...</div>

<div id="skygfxsa" url="http://gtaforums.com/topic/750681-skygfx-ps2-and-xbox-graphics-for-pc/" selector="a[href*='SkyGfx_SA']"></div>
<div id="skygfx3vc" url="http://gtaforums.com/topic/750681-skygfx-ps2-and-xbox-graphics-for-pc/" selector="a[href*='SkyGfx_III_VC']"></div>

<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

<script>
  var cors_api_url = 'https://cors-anywhere.herokuapp.com/';
  function doCORSRequest(options, printResult) {
    var x = new XMLHttpRequest();
    x.open(options.method, cors_api_url + options.url);
    x.onload = x.onerror = function() {
      printResult(
        options.method + ' ' + options.url + '\n' +
        x.status + ' ' + x.statusText + '\n\n' +
        (x.responseText || '')
      );
    };
    if (/^POST/i.test(options.method)) {
      x.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    }
    x.send(options.data);
  }

  // Bind event
  (function() {
    var hash = window.location.hash.substr(1);
	  if (hash != "") {
      var urlField = $("#"+hash).attr("url");
      var selectorField = $("#"+hash).attr("selector");
        doCORSRequest({
          method: this.id === 'post' ? 'POST' : 'GET',
          url: urlField,
          data: ""
        }, function parseResult(result) {
		  	object = $('<div/>').html(result).contents();
		  	document.write(object.find(selectorField).attr("href"));
			document.close();
        });
	  }
    else {
    document.write("");
	document.close();
	}
  })();
</script>

</body>

</html>
